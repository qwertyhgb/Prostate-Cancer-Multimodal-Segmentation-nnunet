# å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸš€ ä¸€é”®è¿è¡Œï¼ˆæ¨èï¼‰

```bash
# äº¤äº’å¼è¿è¡Œï¼Œé€‰æ‹©ç›¸ä¼¼æ€§å¡«å……æ¨¡å¼
python script/run_conversion.py

# æˆ–ç›´æ¥ä½¿ç”¨æœ€ä½³æ¨¡å¼
python script/convert_bph_pca_to_nnunet.py --mode similarity_fill
```

## ğŸ”§ å¤„ç†æ¨¡å¼

### 1. similarity_fillï¼ˆé»˜è®¤ï¼Œå¼ºçƒˆæ¨èï¼‰
- **é€šé“æ•°**: 5é€šé“
- **å¤„ç†æ–¹å¼**: ç¼ºå¤±çš„gaoqing-T2ç”¨ç›¸ä¼¼æ€§å¡«å……
- **æ•°æ®é‡**: æœ€å¤§ï¼ˆ459ä¾‹ï¼‰
- **é€‚ç”¨åœºæ™¯**: æœ€ä½³æ•ˆæœï¼Œä¿ç•™T2åŠ æƒä¿¡æ¯

```bash
python script/convert_bph_pca_to_nnunet.py --mode similarity_fill
```

### 2. zero_fill
- **é€šé“æ•°**: 5é€šé“
- **å¤„ç†æ–¹å¼**: ç¼ºå¤±çš„gaoqing-T2ç”¨0å¡«å……
- **æ•°æ®é‡**: æœ€å¤§ï¼ˆ459ä¾‹ï¼‰
- **é€‚ç”¨åœºæ™¯**: å¹³è¡¡æ•°æ®é‡å’Œä¸€è‡´æ€§

```bash
python script/convert_bph_pca_to_nnunet.py --mode zero_fill
```

### 3. core_4
- **é€šé“æ•°**: 4é€šé“
- **å¤„ç†æ–¹å¼**: åªä½¿ç”¨æ ¸å¿ƒæ¨¡æ€ï¼ˆADC, DWI, T2 fs, T2 not fsï¼‰
- **æ•°æ®é‡**: æœ€å¤§ï¼ˆ459ä¾‹ï¼‰
- **é€‚ç”¨åœºæ™¯**: ç¡®ä¿æ•°æ®å®Œå…¨ä¸€è‡´

```bash
python script/convert_bph_pca_to_nnunet.py --mode core_4
```

### 4. strict_5
- **é€šé“æ•°**: 5é€šé“
- **å¤„ç†æ–¹å¼**: è¦æ±‚æ‰€æœ‰æ¨¡æ€éƒ½å­˜åœ¨
- **æ•°æ®é‡**: è¾ƒå°‘ï¼ˆ258ä¾‹ï¼‰
- **é€‚ç”¨åœºæ™¯**: æ•°æ®è´¨é‡ä¼˜å…ˆ

```bash
python script/convert_bph_pca_to_nnunet.py --mode strict_5
```

## ğŸ“Š å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--source_dir` | `data/BPH-PCA` | æºæ•°æ®ç›®å½• |
| `--output_dir` | `nnUNet_raw` | è¾“å‡ºç›®å½• |
| `--dataset_id` | `1` | æ•°æ®é›†ID |
| `--mode` | `similarity_fill` | å¤„ç†æ¨¡å¼ |

## ğŸ“ è¾“å‡ºç»“æœ

è½¬æ¢åç”Ÿæˆæ ‡å‡†nnU-Net v2æ ¼å¼ï¼š
```
nnUNet_raw/Dataset001_BPH_PCA/
â”œâ”€â”€ imagesTr/          # è®­ç»ƒå›¾åƒ
â”œâ”€â”€ labelsTr/          # è®­ç»ƒæ ‡ç­¾  
â”œâ”€â”€ imagesTs/          # æµ‹è¯•å›¾åƒï¼ˆç©ºï¼‰
â””â”€â”€ dataset.json       # æ•°æ®é›†é…ç½®
```

## ğŸ’¡ åç»­æ­¥éª¤

```bash
# 1. è®¾ç½®ç¯å¢ƒå˜é‡
export nnUNet_raw="path/to/nnUNet_raw"
export nnUNet_preprocessed="path/to/nnUNet_preprocessed"
export nnUNet_results="path/to/nnUNet_results"

# 2. é¢„å¤„ç†
nnUNetv2_plan_and_preprocess -d 1

# 3. è®­ç»ƒ
nnUNetv2_train 1 3d_fullres 0
```

## ğŸ¯ æ¨èé…ç½®

**æœ€æ¨è**: `similarity_fill`æ¨¡å¼
- æ•°æ®åˆ©ç”¨ç‡æœ€é«˜ï¼ˆ459ä¾‹ï¼‰
- é€šé“æ•°ä¸€è‡´ï¼ˆ5é€šé“ï¼‰
- ä¿ç•™T2åŠ æƒä¿¡æ¯ï¼Œæ•ˆæœæœ€ä½³
- è®­ç»ƒç¨³å®šæ€§å¥½